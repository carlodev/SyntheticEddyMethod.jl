<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Usage · SyntheticEddyMethod.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SyntheticEddyMethod.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Usage</a><ul class="internal"><li><a class="tocitem" href="#Using-the-SEM"><span>Using the SEM</span></a></li><li><a class="tocitem" href="#Using-the-DFSEM"><span>Using the DFSEM</span></a></li></ul></li><li><a class="tocitem" href="../advanced_usage/">Advanced Usage</a></li><li><a class="tocitem" href="../exploring/">Exploring</a></li><li><a class="tocitem" href="../ref/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Usage</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/carlodev/SyntheticEddyMethod.jl/blob/master/docs/src/usage.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Package-usage"><a class="docs-heading-anchor" href="#Package-usage">Package usage</a><a id="Package-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Package-usage" title="Permalink"></a></h1><h2 id="Using-the-SEM"><a class="docs-heading-anchor" href="#Using-the-SEM">Using the SEM</a><a id="Using-the-SEM-1"></a><a class="docs-heading-anchor-permalink" href="#Using-the-SEM" title="Permalink"></a></h2><p>At first, the user defines the dimension and resolution of the virtual box where the eddies are going to be generated as well as the dimension of the eddies (<code>σ</code>). A common choice is <code>σ = 2Δz</code> or <code>σ = Δz</code>, where <code>Δz</code> is the mesh resolution in the <code>z</code> direction.</p><pre><code class="language-julia hljs">using SyntheticEddyMethod
σ = 0.1
b = 5.0
a = 0.0
y = collect(a:0.1:b)
z = collect(a:0.1:b)</code></pre><p>Notice: only the first and last value of ´y´ and ´z´ are used to create the VirtualBox.</p><p>Then you create the <code>VirtualBox</code> structure that has embedded all the information about the virtual box where the eddy are generated. The number of eddy is automatically computed in order to guarantee an homogeneous fill. You can manually override the value (<code>Vboxinfo.N</code>).</p><pre><code class="language-julia hljs">Vboxinfo = VirtualBox(y,z,σ)
N = Vboxinfo.N #you can override it </code></pre><p>Then, eddies are initialize in the virtualbox with random values of position and intensity. You have to specify the time-step, <code>dt</code>. Then the Reynolds stress tensor. Here homegeneous and isotropic turbulence is considered, so <span>$R_{ij} = 0, i!=j; R_{ij} != 0, i=j$</span>, and the terms are computed from the turbulence intensity (<code>TI</code>). Then the Matrix <code>A</code> is created using the <code>cholesky_decomposition</code> function.</p><pre><code class="language-julia hljs">Eddies = initialize_eddies(Vboxinfo)
t = 0
dt = 0.001
U₀ = 1.0
TI = 0.01 #turbulence intensity

Re_stress, Eddies = initialize_eddies(U₀, TI, Vboxinfo)
</code></pre><p>You have to create a <code>Vector{Vector{Float64}}</code> of points where you want to evaluate the speed.</p><pre><code class="language-julia hljs">x = 0.0
vector_points = create_vector_points(x, y, z)
</code></pre><pre><code class="language-julia hljs">u_fluct = compute_fluct(vector_points, dt, Eddies, U₀, Vboxinfo, Re_stress)</code></pre><p>You can create evaluate the speed in just one point (useful for monitoring how the velocity varies in time and creating the spectra)</p><pre><code class="language-julia hljs">single_point = [0.0, 1.0, 2.5]
u_fluct = compute_fluct(single_point, dt, Eddies, U₀, Vboxinfo, Re_stress)
</code></pre><p>Compute the velocity fluctuation and then is &#39;corrected&#39; using the Reynolds Stress tensor.</p><p>Compute the turbulent kinetic energy:</p><pre><code class="language-julia hljs">    Ek  = compute_Ek(u_fluct, U₀)</code></pre><h2 id="Using-the-DFSEM"><a class="docs-heading-anchor" href="#Using-the-DFSEM">Using the DFSEM</a><a id="Using-the-DFSEM-1"></a><a class="docs-heading-anchor-permalink" href="#Using-the-DFSEM" title="Permalink"></a></h2><p>Following an analogus procedure is possible to use the divergence-free sythetic eddy method. It allows to create fluctuations that are divergence-free, useful for incompressible flows. The virtual box is created in an analogus way. Internally the shape function in this case is <a href="../ref/#SyntheticEddyMethod.DFSEM_fun"><code>DFSEM_fun</code></a> which has been specifically designed for the DFSEM.</p><pre><code class="language-julia hljs">using SyntheticEddyMethod
using LinearAlgebra
σ = 0.1
b = 5.0
a = 0.0
y = collect(a:0.1:b)
z = collect(a:0.1:b)

Vboxinfo = VirtualBox(y,z,σ)
dt = 0.001
U₀ = 1.0
TI = 0.01 #turbulence intensity

Re_stress, Eddies = initialize_eddies(U₀, TI, Vboxinfo)
</code></pre><p>Now, we are going to evaluate the fluctutations in 4 points useful for approximating the divergence:<br/><span>$[x,y,z], [x+dx, y, z], [x,y+dy,z], [x,y,z+dz]$</span></p><pre><code class="language-julia hljs">dl = 0.0001
vector_points = [[0.0, b / 2, b / 2], [dl, b / 2, b / 2], [0.0, b / 2 + dl, b / 2], [0.0, b / 2, b / 2 + dl]]
u_fluct = compute_fluct(vector_points, dt, Eddies, U₀, Vboxinfo, Re_stress; DFSEM = true)</code></pre><p>In order to verify the diverge-free condition is respected, the derivatives in each direction are computed with a simple forward method. The divergence is normalized with the module of the gradient to obtain a non-diemensional quantity.<br/><span>$\dfrac{\nabla\cdot \vec{u}}{|\nabla \vec{u}|}$</span></p><pre><code class="language-julia hljs">dudx = (u_fluct[2][1] - u_fluct[1][1]) / dl
dvdy = (u_fluct[3][2] - u_fluct[1][2]) / dl
dwdz = (u_fluct[4][3] - u_fluct[1][3]) / dl
grad_norm = norm([dudx, dvdy, dwdz])
div_val = dudx + dvdy + dwdz

div_val/grad_norm</code></pre><p>Note: if <span>$|\nabla \vec{u}|$</span> is too small, it can leads <code>NaN</code> values.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../advanced_usage/">Advanced Usage »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Tuesday 28 March 2023 06:11">Tuesday 28 March 2023</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
